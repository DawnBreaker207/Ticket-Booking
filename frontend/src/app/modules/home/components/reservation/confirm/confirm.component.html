<div class="flex flex-col space-y-6">
  <!--   CLIENT INFORMATION   -->
  <div
    class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"
  >
    <div
      class="bg-gray-50/50 px-6 py-4 border-gray-100 flex items-center gap-2"
    >
      <span
        class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-primary"
      >
        <nz-icon nzType="user" nzTheme="outline" />
      </span>
      <h3 class="text-lg font-bold text-gray-800 m-0">Thông tin nhận vé</h3>
    </div>

    <div class="p-6">
      @if (user$ | async; as user) {
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!--    Username    -->
          <div class="space-y-1">
            <label
              class="text-xs font-semibold text-gray-500 uppercase tracking-wide"
              >Họ và tên</label
            >
            <div
              class="font-medium text-gray-900 text-base border-b border-gray-100 pb-2"
            >
              {{ user.username || "Khách vãng lai" }}
            </div>
          </div>

          <!--  Phone number    -->
          <div class="space-y-1">
            <label
              class="text-xs font-semibold text-gray-500 uppercase tracking-wide"
              >Số điện thoại</label
            >
            <div
              class="font-medium text-gray-900 text-base border-b border-gray-100 pb-2"
            >
              {{ user.email }}
            </div>
          </div>

          <!--   Email    -->
          <div class="space-y-1 md:col-span-2">
            <label
              class="text-xs font-semibold text-gray-500 uppercase tracking-wide"
              >Email</label
            >
            <div
              class="font-medium text-gray-900 text-base border-b border-gray-100 pb-2"
            >
              {{ user.email }}
            </div>
            <p class="text-xs text-orange-500 mt-1 flex items-center gap-1">
              <nz-icon nzType="info-circle" />
              Vé sẽ được gửi qua email này, vui lòng kiểm tra kỹ.
            </p>
          </div>
        </div>
      }
    </div>
  </div>

  <!-- VOUCHER -->
  <div
    class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mt-6"
  >
    <div
      class="bg-gray-50/50 px-6 py-4 border-b border-gray-100 flex items-center gap-2"
    >
      <span
        class="w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center text-orange-600"
      >
        <nz-icon nzType="gift" nzTheme="outline" />
      </span>
      <h3 class="text-lg font-bold text-gray-800 mb-0">Mã giảm giá/ Voucher</h3>
    </div>

    <div class="p-6">
      <div class="flex flex-col sm:flex-row gap-3">
        <!-- Input -->
        <div class="flex-1 relative">
          <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
            <nz-icon nzType="tags" />
          </span>
          <input
            nz-input
            placeholder="Nhập mã giảm giá"
            class="pl-9 h-11 rounded-lg border-gray-300 hover:border-primary focus:border-primary focus:shadow-none w-full"
            [(ngModel)]="voucherCode"
          />
        </div>

        <!-- Button -->
        <button
          nz-button
          nzType="primary"
          class="h-11 px-6 rounded-lg font-semibold shadow-sm"
          (click)="applyVoucher()"
          [nzLoading]="isValidatingVoucher"
        >
          Áp dụng
        </button>
      </div>

      <!-- SHOW VOUCHER -->
      @if (appliedVoucher) {
        <div
          class="mt-4 p-3 bg-green-50 border border-green-200 rounded-lg flex justify-between items-center animate-fade-in"
        >
          <div class="flex items-center gap-3">
            <span
              class="bg-white p-1.5 rounded-md border border-green-100 text-green-600"
            >
              <nz-icon nzType="check-circle" nzTheme="fill" />
            </span>
            <div>
              <p class="text-sm font-bold text-green-700 m-0">
                Đã áp dụng: {{ appliedVoucher.code }}
              </p>
              <p class="text-xs text-green-600 m-0">
                Giảm {{ appliedVoucher.discountAmount | currency: "VND" }}
              </p>
            </div>
          </div>
          <button
            class="text-gray-400 hover:text-red-500 transition-colors"
            (click)="removeVoucher()"
          >
            <nz-icon nzType="close" />
          </button>
        </div>
      }

      <!-- MY VOUCHER -->
      <div class="mt-4 flex flex-wrap gap-2">
        <span class="text-xs text-gray-500 py-1">Voucher của bạn:</span>
        <div
          class="cursor-pointer border border-dashed border-primary text-primary bg-blue-50/50 px-2 py-1 rounded text-xs hover:bg-blue-50 transition-colors"
          (click)="voucherCode = 'WELCOME10'"
        >
          WELCOME10
        </div>
        <div
          class="cursor-pointer border border-dashed border-primary text-primary bg-blue-50/50 px-2 py-1 rounded text-xs hover:bg-blue-50 transition-colors"
          (click)="voucherCode = 'FREESHIP'"
        >
          FREESHIP
        </div>
      </div>
    </div>
  </div>

  <!-- PAYMENT METHODS -->
  <div
    class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"
  >
    <div
      class="bg-gray-50/50 px-6 py-4 border-gray-100 flex justify-between items-center"
    >
      <div class="flex items-center gap-2">
        <span
          class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-green-600"
        >
          <nz-icon nzType="credit-card" nzTheme="outline" />
        </span>
        <h3 class="text-lg font-bold text-gray-800 m-0">
          Phương thức thanh toán
        </h3>
      </div>
      <a href="#" class="text-sm text-primary hover:underline font-medium"
        >Hướng dẫn</a
      >
    </div>

    <div class="p-6">
      <nz-radio-group [(ngModel)]="radioValue">
        <label
          nz-radio
          nzValue="A"
          class="w-full border rounded-xl p-4 transition-all duration-200 hover:bg-gray-50 flex items-center"
          [class.border-blue-600]="radioValue === 'A'"
          [class.bg-blue-50]="radioValue === 'A'"
          [class.ring-1]="radioValue === 'A'"
          [class.ring-blue-600]="radioValue === 'A'"
          [class.border-gray-200]="radioValue !== 'A'"
        >
          <div class="flex items-center gap-4 w-full">
            <div
              class="w-12 h-12 flex items-center justify-center rounded-lg border border-gray-100 bg-white p-1 shrink-0 shadow-sm"
            >
              <img
                src="assets/payment/ic-card-vn.png"
                alt="ATM"
                class="w-full h-full object-contain"
              />
            </div>
            <div class="flex-1">
              <div class="font-bold text-gray-800">Thẻ ATM nội địa</div>
              <div class="text-xs text-gray-500">
                Cần đăng ký Internet Banking
              </div>
            </div>
          </div>
        </label>

        <label
          nz-radio
          nzValue="B"
          class="w-full border rounded-xl p-4 transition-all duration-200 hover:bg-gray-50 flex items-center"
          [class.border-blue-600]="radioValue === 'B'"
          [class.bg-blue-50]="radioValue === 'B'"
          [class.ring-1]="radioValue === 'B'"
          [class.ring-blue-600]="radioValue === 'B'"
          [class.border-gray-200]="radioValue !== 'B'"
        >
          <div class="flex items-center gap-4 w-full">
            <div
              class="w-12 h-12 flex items-center justify-center rounded-lg border border-gray-100 bg-white p-1 shrink-0 shadow-sm"
            >
              <img
                src="assets/payment/ic-card-gb.png"
                alt="VISA"
                class="w-full h-full object-contain"
              />
            </div>
            <div class="flex-1">
              <div class="font-bold text-gray-800">Thẻ Visa / Master /JCB</div>
              <div class="text-xs text-gray-500">Thanh toán quốc tế</div>
            </div>
          </div>
        </label>

        <label
          nz-radio
          nzValue="C"
          class="w-full border rounded-xl p-4 transition-all duration-200 hover:bg-gray-50 flex items-center"
          [class.border-blue-600]="radioValue === 'C'"
          [class.bg-blue-50]="radioValue === 'C'"
          [class.ring-1]="radioValue === 'C'"
          [class.ring-blue-600]="radioValue === 'C'"
          [class.border-gray-200]="radioValue !== 'C'"
        >
          <div class="flex items-center gap-4 w-full">
            <div
              class="w-12 h-12 flex items-center justify-center rounded-lg border border-gray-100 bg-white p-1 shrink-0 shadow-sm"
            >
              <img
                src="assets/payment/shopeepay.png"
                alt="ShopeePay"
                class="w-full h-full object-contain"
              />
            </div>
            <div class="flex-1">
              <div class="font-bold text-gray-800">Ví ShopeePay</div>
            </div>
          </div>
        </label>

        <label
          nz-radio
          nzValue="D"
          class="w-full border rounded-xl p-4 transition-all duration-200 hover:bg-gray-50 flex items-center"
          [class.border-blue-600]="radioValue === 'D'"
          [class.bg-blue-50]="radioValue === 'D'"
          [class.ring-1]="radioValue === 'D'"
          [class.ring-blue-600]="radioValue === 'D'"
          [class.border-gray-200]="radioValue !== 'D'"
        >
          <div class="flex items-center gap-4 w-full">
            <div
              class="w-12 h-12 flex items-center justify-center rounded-lg border border-gray-100 bg-white p-1 shrink-0 shadow-sm"
            >
              <img
                src="assets/payment/momo.ico"
                alt="Momo"
                class="w-full h-full object-contain"
              />
            </div>
            <div class="flex-1">
              <div class="font-bold text-gray-800">Ví Momo</div>
            </div>
          </div>
        </label>

        <label
          nz-radio
          nzValue="E"
          class="w-full border rounded-xl p-4 transition-all duration-200 hover:bg-gray-50 flex items-center"
          [class.border-blue-600]="radioValue === 'E'"
          [class.bg-blue-50]="radioValue === 'E'"
          [class.ring-1]="radioValue === 'E'"
          [class.ring-blue-600]="radioValue === 'E'"
          [class.border-gray-200]="radioValue !== 'E'"
        >
          <div class="flex items-center gap-4 w-full">
            <div
              class="w-12 h-12 flex items-center justify-center rounded-lg border border-gray-100 bg-white p-1 shrink-0 shadow-sm"
            >
              <img
                src="assets/payment/zalopay.png"
                alt="ZaloPay"
                class="w-full h-full object-contain"
              />
            </div>
            <div class="flex-1">
              <div class="font-bold text-gray-800">Ví ZaloPay</div>
            </div>
          </div>
        </label>

        <label
          nz-radio
          nzValue="F"
          class="w-full border rounded-xl p-4 transition-all duration-200 hover:bg-gray-50 flex items-center"
          [class.border-blue-600]="radioValue === 'F'"
          [class.bg-blue-50]="radioValue === 'F'"
          [class.ring-1]="radioValue === 'F'"
          [class.ring-blue-600]="radioValue === 'F'"
          [class.border-gray-200]="radioValue !== 'F'"
        >
          <div class="flex items-center gap-4 w-full">
            <div
              class="w-12 h-12 flex items-center justify-center rounded-lg border border-gray-100 bg-white p-1 shrink-0 shadow-sm"
            >
              <img
                src="assets/payment/vnpay.svg"
                alt="VNPay"
                class="w-full h-full object-contain"
              />
            </div>
            <div class="flex-1">
              <div class="font-bold text-gray-800">VNPAY QR</div>
              <div class="text-xs text-gray-500">
                Quét mã QR từ ứng dụng ngân hàng
              </div>
            </div>
          </div>
        </label>
      </nz-radio-group>
    </div>
  </div>
</div>
