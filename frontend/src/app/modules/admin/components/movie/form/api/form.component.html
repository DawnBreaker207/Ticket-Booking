<div class="mt-10">
  <!-- Search box -->
  <div class="flex mb-4">
    <input nz-input
           [formControl]="searchCtrl"
           placeholder="Nhập tên phim API..."
           class="w-full"/>
    <button nz-button nzType="primary" (click)="onSearch()">Tìm</button>
  </div>
  <!-- Search result list -->
  @if (searchResults().length > 0) {
    <nz-list [nzDataSource]="searchResults()" [nzRenderItem]="item" [nzBordered]="true"
             class="max-h-52 overflow-y-auto">
      <ng-template #item let-movie>
        <nz-list-item (click)="selectMovie(movie)" class="cursor-pointer transition p-2 rounded"
                      [ngClass]="{'bg-blue-100': selectedMovie()?.id === movie.id,'hover:bg-gray-100': selectedMovie()?.id !== movie.id}"
        >
          <nz-list-item-meta
            [nzAvatar]="nzAvatar"
            [nzTitle]="nzTitle"
            [nzDescription]="nzDescription">
          </nz-list-item-meta>

          <ng-template #nzAvatar>
            <nz-avatar nzShape="square" [nzSize]="64"
                       [nzSrc]="'https://image.tmdb.org/t/p/w92' + movie.poster_path">
            </nz-avatar>
          </ng-template>

          <ng-template #nzTitle>
            <span class="font-semibold">{{ movie.title }}</span>
          </ng-template>

          <ng-template #nzDescription>
              <span class="text-xs text-gray-500">
                {{ movie.release_date | date: 'yyyy' }} — {{ movie.overview }}
              </span>
          </ng-template>
        </nz-list-item>
      </ng-template>
    </nz-list>
  }
</div>

