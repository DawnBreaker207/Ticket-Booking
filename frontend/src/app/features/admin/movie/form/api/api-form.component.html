<div class="mt-2">
  <!-- Search Input -->
  <div class="flex gap-2 mb-4">
    <input
      nz-input
      [formControl]="searchCtrl"
      (keyup.enter)="onSearch()"
      [placeholder]="'Nhập tên phim API...' | translate"
      class="rounded-lg"
    />
    <button
      nz-button
      nzType="primary"
      (click)="onSearch()"
      class="rounded-lg"
      [nzLoading]="isLoading()"
    >
      Tìm kiếm
    </button>
  </div>

  <!-- Scrollable Result List -->
  <div class="h-[400px] overflow-y-auto pr-1">
    @if (isLoading()) {
      <div class="flex justify-center items-center h-full">
        <nz-spin nzSimple></nz-spin>
      </div>
    } @else {
      @if (searchResults().length > 0) {
        <div class="space-y-3">
          @for (movie of searchResults(); track movie.id) {
            <div
              class="flex gap-4 p-3 rounded-xl border border-gray-100 hover:bg-blue-50 hover:border-blue-200 bg-white cursor-pointer transition-all group"
              (click)="selectMovie(movie)"
              (keyup.enter)="selectMovie(movie)"
              tabindex="0"
              role="button"
            >
              <!-- Poster Image -->
              <img
                [src]="'https://image.tmdb.org/t/p/w92' + movie.poster_path"
                [alt]="movie.title"
                class="w-16 h-24 object-cover rounded-lg bg-gray-200 shrink-0"
              />

              <!-- Content -->
              <div class="flex-1">
                <h4 class="font-bold text-gray-800 group-hover:text-primary">
                  {{ movie.title }}
                </h4>
                <p class="text-xs text-gray-500 mb-1">
                  {{ "Phát hành" | translate }}:
                  {{ movie.release_date | date: "yyyy" }}
                </p>

                <!-- Rating -->
                @if (movie.vote_average) {
                  <div
                    class="flex items-center gap-1 text-xs font-bold text-orange-500"
                  >
                    <nz-icon nzType="star" nzTheme="fill" />
                    {{ movie.vote_average }}
                  </div>
                }

                <p class="text-xs text-gray-400 line-clamp-2 mt-2">
                  {{ movie.overview || "Chưa có mô tả" }}
                </p>
              </div>

              <!-- Action Icon -->
              <div class="flex items-center px-2">
                <nz-icon
                  nzType="plus-circle"
                  class="text-2xl text-gray-300 group-hover:text-primary transition-colors"
                />
              </div>
            </div>
          }
        </div>
      } @else {
        <!-- Empty State -->
        <div
          class="flex flex-col items-center justify-center h-full text-gray-400"
        >
          <span nz-icon nzType="search" class="text-4xl mb-2"></span>
          <p>{{ "Chưa có kết quả tìm kiếm" | translate }}</p>
        </div>
      }
    }
  </div>
</div>
